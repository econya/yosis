.card
  .card-image
    -#- if lesson.video.attached?
    - if user_has_access?
      %video(controls="true" poster="#{rails_blob_url(lesson.preview_image)}" preload="auto" id="vs-#{lesson.id}" width="100%" preload="metadata")
        %source{src: rails_blob_url(lesson.video), type:"video/mp4"}
        = t('no-video-support')
      -#:javascript
      -#  // set poster (url)
      -#  // bitplaybutton?
      -#  var player=videojs("vs-#{lesson.id}", {"preload": false});
      -#, "poster": "#{rails_blob_url(lesson.preview_image)}", "width": 240});
      -#= videojs_rails sources: { mp4: rails_blob_url(lesson.video)}, setup: "{}", controls: true, width:"100%"
      -#= image_tag lesson.video.preview(resize_to_fit: [100, 100])
    - else
      %figure.image
        = image_tag lesson.preview_image.variant(resize_to_fill: [320,240]).processed
  %header.card-header
    %p.card-header-title.is-centered.has-background-white-ter
      = lesson.name
  .card-content
    - if lesson.video.attached? && lesson.video.metadata[:duration]
      = t('video.length')
      \:
      = (lesson.video.metadata[:duration] / 60).round
      =t('video.minutes')
  - if user_admin?
    %footer.card-footer
      = link_to 'edit', [:admin, lesson.course, lesson], class: 'card-footer-item'

